# بازطراحی صفحه پروژه

## تغییرات انجام شده

### 1. کامپوننت‌های جدید

#### FolderCard.tsx
- نمایش پوشه‌ها به صورت کارت مشابه ProjectCard
- طراحی زیبا و مدرن با انیمیشن hover
- نمایش اطلاعات پوشه شامل نام، توضیحات، تعداد اسناد و سطح عمق

#### FolderManager.tsx
- مدیریت کامل پوشه‌ها و اسناد
- ناوبری breadcrumb برای مسیر پوشه‌ها
- امکان ایجاد پوشه جدید و آپلود سند
- نمایش پوشه‌ها و اسناد در grid responsive

#### FolderPermissions.tsx
- مدیریت دسترسی کاربران به پوشه‌ها
- استفاده از چک‌باکس ساده برای تعیین دسترسی
- نمایش کاربران پروژه با نقش‌های مختلف

### 2. بازطراحی صفحه اصلی پروژه

#### ساختار جدید
- **Header**: نام پروژه، آمار، دکمه‌های بازگشت و ویرایش
- **Tab 1**: پوشه‌ها و اسناد (FolderManager)
- **Tab 2**: مدیریت دسترسی‌ها (ProjectPermissions + FolderPermissions)

#### ویژگی‌های جدید
- طراحی مدرن و زیبا با Material-UI
- Breadcrumb navigation برای مسیر پوشه‌ها
- نمایش آمار پروژه در کارت جداگانه
- مدیریت دسترسی‌ها در یک tab جداگانه

### 3. API جدید

#### `/api/folders/[id]/permissions`
- `GET`: دریافت دسترسی‌های پوشه
- `POST`: ایجاد یا بروزرسانی دسترسی
- `DELETE`: حذف دسترسی

### 4. تغییرات دیتابیس

#### جدول جدید: FolderPermissions
```sql
model FolderPermissions {
  id        String   @id @default(cuid())
  folderId  String
  userId    String
  canView   Boolean  @default(false)
  canEdit   Boolean  @default(false)
  canDelete Boolean  @default(false)
  
  folder    Folder   @relation(fields: [folderId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@unique([folderId, userId])
}
```

### 5. مزایای طراحی جدید

#### سادگی
- کد کمتر و قابل فهم‌تر
- استفاده از کامپوننت‌های موجود
- طراحی یکپارچه و منسجم

#### قابلیت استفاده مجدد
- کامپوننت‌ها در جاهای دیگر قابل استفاده
- ساختار modular و قابل توسعه

#### تجربه کاربری بهتر
- ناوبری آسان با breadcrumb
- نمایش واضح ساختار پوشه‌ها
- مدیریت دسترسی ساده با چک‌باکس

### 6. نحوه استفاده

#### برای کاربران عادی
- مشاهده پوشه‌ها و اسناد
- ناوبری در ساختار پوشه‌ها
- دانلود و مشاهده اسناد

#### برای مدیران
- ایجاد و حذف پوشه‌ها
- آپلود اسناد
- مدیریت دسترسی کاربران به پروژه و پوشه‌ها

### 7. نکات فنی

#### Performance
- استفاده از Grid responsive برای نمایش محتوا
- Lazy loading برای دسترسی‌ها
- بهینه‌سازی API calls

#### Security
- بررسی دسترسی admin برای عملیات حساس
- Validation ورودی‌ها
- Cascade delete برای دسترسی‌ها

## نتیجه‌گیری

صفحه پروژه با موفقیت بازطراحی شد و شامل:
- طراحی مدرن و زیبا
- مدیریت کامل پوشه‌ها و اسناد
- سیستم دسترسی پیشرفته
- کد ساده و قابل نگهداری
- تجربه کاربری بهتر

همه تغییرات با رعایت اصول طراحی و کدنویسی تمیز انجام شده است.
