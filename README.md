# سیستم آرشیو اسناد سپهر (Sepehr Archive System)

<div align="center">
  <img src="public/logo.png" alt="Sepehr Archive Logo" width="200" height="200">
  
  [![Next.js](https://img.shields.io/badge/Next.js-15.4.6-black?style=for-the-badge&logo=next.js)](https://nextjs.org/)
  [![React](https://img.shields.io/badge/React-19.1.0-blue?style=for-the-badge&logo=react)](https://reactjs.org/)
  [![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
  [![Prisma](https://img.shields.io/badge/Prisma-6.13.0-2D3748?style=for-the-badge&logo=prisma)](https://prisma.io/)
  [![PostgreSQL](https://img.shields.io/badge/PostgreSQL-13+-blue?style=for-the-badge&logo=postgresql)](https://postgresql.org/)
</div>

## 📋 نمای کلی پروژه

سیستم آرشیو اسناد سپهر یک پلتفرم جامع مدیریت اسناد و حسابداری است که برای سازمان‌ها و شرکت‌های ساختمانی طراحی شده است. این سیستم شامل مدیریت پروژه‌ها، اسناد، کاربران، سیستم مالی پیشرفته و سیستم حسابداری کامل می‌باشد.

## ✨ ویژگی‌های اصلی

### 🗂️ مدیریت پروژه‌ها و اسناد
- **مدیریت پروژه‌ها**: ایجاد، ویرایش و حذف پروژه‌های مختلف با پالت رنگی سفارشی
- **ساختار پوشه‌ای**: سازماندهی اسناد در پوشه‌های سلسله‌مراتبی
- **آپلود اسناد**: پشتیبانی از انواع فایل‌های مختلف (PDF، تصاویر، اسناد Word و Excel)
- **جستجوی هوشمند**: جستجو در پروژه‌ها، پوشه‌ها و اسناد با فیلترهای پیشرفته
- **مدیریت نسخه‌ها**: نگهداری تاریخچه تغییرات اسناد

### 👥 مدیریت کاربران و دسترسی‌ها
- **سیستم احراز هویت**: ورود امن با نام کاربری و رمز عبور
- **کنترل دسترسی مبتنی بر نقش**: نقش‌های مختلف (مدیر، خریدار، پیمانکار، تامین‌کننده)
- **مدیریت مجوزها**: تعیین دسترسی‌های مختلف برای پوشه‌ها و پروژه‌ها
- **لاگ فعالیت‌ها**: ثبت تمام عملیات انجام شده در سیستم

### 💰 سیستم مالی پیشرفته
- **مدیریت اقساط**: تعریف و مدیریت اقساط پروژه‌های ساختمانی
- **محاسبه جریمه**: محاسبه خودکار جریمه‌های تأخیر پرداخت
- **گزارش‌گیری مالی**: گزارش‌های جامع از وضعیت مالی پروژه‌ها
- **نمودارهای تحلیلی**: نمایش داده‌های مالی با نمودارهای تعاملی

### 📊 سیستم حسابداری کامل
- **دفتر روزنامه**: ثبت تمام تراکنش‌های مالی به صورت روزانه
- **دفتر کل**: خلاصه‌سازی تمام حساب‌ها و نمایش موجودی نهایی
- **دفتر معین**: مدیریت حساب‌های تفصیلی مشتریان و پیمانکاران
- **کدینگ حساب‌ها**: ساختار سلسله‌مراتبی کدهای حسابداری
- **ترازنامه**: گزارش‌های ترازنامه و صورت سود و زیان
- **سند افتتاحیه و اختتامیه**: مدیریت سال مالی

### 🎨 رابط کاربری مدرن
- **طراحی ریسپانسیو**: سازگار با تمام دستگاه‌ها (دسکتاپ، تبلت، موبایل)
- **پشتیبانی کامل از زبان فارسی**: فونت و راست‌چین بودن کامل
- **رابط کاربری Material-UI**: استفاده از کامپوننت‌های مدرن و زیبا
- **تم تاریک/روشن**: پشتیبانی از تم‌های مختلف
- **ناوبری موبایل**: نوار ناوبری مخصوص موبایل

## 🛠️ تکنولوژی‌های استفاده شده

### Frontend
- **Next.js 15.4.6** - فریمورک React با قابلیت‌های SSR و SSG
- **React 19.1.0** - کتابخانه رابط کاربری
- **TypeScript 5.0** - زبان برنامه‌نویسی نوع‌دار
- **Material-UI 7.3.1** - کتابخانه کامپوننت‌های UI
- **TanStack Query 5.84.2** - مدیریت state و cache
- **React Hook Form 7.62.0** - مدیریت فرم‌ها
- **Recharts 3.1.2** - کتابخانه نمودارها

### Backend
- **Next.js API Routes** - API های RESTful
- **Prisma 6.13.0** - ORM برای مدیریت دیتابیس
- **PostgreSQL** - دیتابیس رابطه‌ای
- **bcryptjs** - هش کردن رمز عبور
- **JWT (jose)** - احراز هویت و مجوزدهی

### Tools & Libraries
- **Vitest** - فریمورک تست
- **Playwright** - تست end-to-end
- **ESLint & Prettier** - کد کوالیتی و فرمت
- **Zustand** - مدیریت state کلاینت

## 🚀 راه‌اندازی پروژه

### پیش‌نیازها
- Node.js 18+ 
- PostgreSQL 13+
- npm یا yarn

### 1. کلون کردن پروژه
```bash
git clone https://github.com/mohsensepehrsahand-png/sepehr-archive.git
cd sepehr-archive
```

### 2. نصب وابستگی‌ها
```bash
npm install
# یا
yarn install
```

### 3. تنظیم دیتابیس
```bash
# ایجاد فایل .env.local
cp .env.example .env.local

# ویرایش متغیرهای محیطی
# DATABASE_URL="postgresql://username:password@localhost:5432/sepehr_archive"
```

### 4. اجرای Migration ها
```bash
npx prisma migrate dev
```

### 5. Seed کردن دیتابیس
```bash
npm run db:seed
```

### 6. اجرای پروژه
```bash
npm run dev
```

پروژه در آدرس `http://localhost:3000` در دسترس خواهد بود.

## 📁 ساختار پروژه

```
src/
├── app/                    # Next.js App Router
│   ├── (routes)/          # صفحات اصلی
│   │   ├── accounting/    # صفحات حسابداری
│   │   ├── finance/       # صفحات مالی
│   │   ├── projects/      # صفحات پروژه‌ها
│   │   └── ...
│   └── api/               # API Routes
│       ├── accounting/    # API های حسابداری
│       ├── finance/       # API های مالی
│       └── ...
├── components/            # کامپوننت‌های React
│   ├── accounting/        # کامپوننت‌های حسابداری
│   ├── finance/           # کامپوننت‌های مالی
│   ├── common/            # کامپوننت‌های مشترک
│   └── layout/            # کامپوننت‌های چیدمان
├── contexts/              # React Context ها
├── hooks/                 # Custom Hooks
├── lib/                   # توابع کمکی
└── utils/                 # ابزارهای کمکی
```

## 🔐 سیستم احراز هویت

### نقش‌های کاربری
- **مدیر (Admin)**: دسترسی کامل به تمام بخش‌ها
- **خریدار (Buyer)**: دسترسی به پروژه‌ها و اسناد مربوطه
- **پیمانکار (Contractor)**: دسترسی محدود به پروژه‌های مربوطه
- **تامین‌کننده (Supplier)**: دسترسی به اطلاعات پروژه‌ها

### امنیت
- هش کردن رمز عبور با bcrypt
- JWT برای احراز هویت
- کنترل دسترسی در سطح API
- اعتبارسنجی ورودی‌ها

## 📊 سیستم حسابداری

### دفاتر سه گانه
1. **دفتر روزنامه**: ثبت تراکنش‌های روزانه
2. **دفتر کل**: خلاصه حساب‌ها
3. **دفتر معین**: حساب‌های تفصیلی

### کدینگ حساب‌ها
- **1000-1999**: دارایی‌ها
- **2000-2999**: بدهی‌ها
- **3000-3999**: حقوق صاحبان سهام
- **4000-4999**: درآمدها
- **5000-5999**: هزینه‌ها

### گزارش‌های مالی
- ترازنامه
- صورت سود و زیان
- تراز آزمایشی
- گزارش‌های تفصیلی

## 💰 سیستم مالی

### مدیریت اقساط
- تعریف اقساط پروژه
- محاسبه سهم هر کاربر
- ثبت پرداخت‌ها
- محاسبه جریمه تأخیر

### ویژگی‌های پیشرفته
- نمودارهای تحلیلی
- گزارش‌های PDF
- اعلان‌های خودکار
- پشتیبانی از چندین ارز

## 📱 طراحی ریسپانسیو

### دسکتاپ
- نوار کناری کامل
- جداول با قابلیت‌های پیشرفته
- نمودارهای تعاملی

### موبایل
- نوار ناوبری پایین
- کارت‌های فشرده
- منوهای کشویی

## 🧪 تست‌ها

### اجرای تست‌ها
```bash
# تست‌های واحد
npm run test

# تست‌های E2E
npm run test:e2e

# تست با UI
npm run test:ui
```

## 📈 عملکرد

### بهینه‌سازی‌ها
- Server-Side Rendering (SSR)
- Static Site Generation (SSG)
- Image Optimization
- Code Splitting
- Caching با React Query

## 🚀 استقرار (Deployment)

### Vercel (توصیه شده)
```bash
npm install -g vercel
vercel
```

### Docker
```bash
docker build -t sepehr-archive .
docker run -p 3000:3000 sepehr-archive
```

## 🤝 مشارکت

1. Fork کنید
2. شاخه جدید ایجاد کنید (`git checkout -b feature/amazing-feature`)
3. تغییرات را commit کنید (`git commit -m 'Add amazing feature'`)
4. Push کنید (`git push origin feature/amazing-feature`)
5. Pull Request ایجاد کنید

## 📝 مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای جزئیات بیشتر فایل [LICENSE](LICENSE) را مطالعه کنید.

## 📞 پشتیبانی

- **ایمیل**: support@sepehr-archive.com
- **تلفن**: +98-21-1234-5678
- **وب‌سایت**: https://sepehr-archive.com

## 🙏 تشکر

از تمام کسانی که در توسعه این پروژه مشارکت داشته‌اند، صمیمانه تشکر می‌کنیم.

---

<div align="center">
  <p>ساخته شده با ❤️ در ایران</p>
  <p>© 2024 سیستم آرشیو اسناد سپهر. تمام حقوق محفوظ است.</p>
</div>